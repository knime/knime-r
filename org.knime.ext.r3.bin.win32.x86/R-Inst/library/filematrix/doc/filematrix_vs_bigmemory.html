<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />

<meta name="author" content="Andrey A Shabalin" />

<meta name="date" content="2016-05-23" />

<title>Filematrix vs. bigmemory (packages)</title>


<style type="text/css">code{white-space: pre;}</style>
<link href="data:text/css;charset=utf-8,pre%20%2Eoperator%2C%0Apre%20%2Eparen%20%7B%0Acolor%3A%20rgb%28104%2C%20118%2C%20135%29%0A%7D%0Apre%20%2Eliteral%20%7B%0Acolor%3A%20%23990073%0A%7D%0Apre%20%2Enumber%20%7B%0Acolor%3A%20%23099%3B%0A%7D%0Apre%20%2Ecomment%20%7B%0Acolor%3A%20%23998%3B%0Afont%2Dstyle%3A%20italic%0A%7D%0Apre%20%2Ekeyword%20%7B%0Acolor%3A%20%23900%3B%0Afont%2Dweight%3A%20bold%0A%7D%0Apre%20%2Eidentifier%20%7B%0Acolor%3A%20rgb%280%2C%200%2C%200%29%3B%0A%7D%0Apre%20%2Estring%20%7B%0Acolor%3A%20%23d14%3B%0A%7D%0A" rel="stylesheet" type="text/css" />
<script src="data:application/x-javascript;base64,CnZhciBobGpzPW5ldyBmdW5jdGlvbigpe2Z1bmN0aW9uIG0ocCl7cmV0dXJuIHAucmVwbGFjZSgvJi9nbSwiJmFtcDsiKS5yZXBsYWNlKC88L2dtLCImbHQ7Iil9ZnVuY3Rpb24gZihyLHEscCl7cmV0dXJuIFJlZ0V4cChxLCJtIisoci5jST8iaSI6IiIpKyhwPyJnIjoiIikpfWZ1bmN0aW9uIGIocil7Zm9yKHZhciBwPTA7cDxyLmNoaWxkTm9kZXMubGVuZ3RoO3ArKyl7dmFyIHE9ci5jaGlsZE5vZGVzW3BdO2lmKHEubm9kZU5hbWU9PSJDT0RFIil7cmV0dXJuIHF9aWYoIShxLm5vZGVUeXBlPT0zJiZxLm5vZGVWYWx1ZS5tYXRjaCgvXHMrLykpKXticmVha319fWZ1bmN0aW9uIGgodCxzKXt2YXIgcD0iIjtmb3IodmFyIHI9MDtyPHQuY2hpbGROb2Rlcy5sZW5ndGg7cisrKXtpZih0LmNoaWxkTm9kZXNbcl0ubm9kZVR5cGU9PTMpe3ZhciBxPXQuY2hpbGROb2Rlc1tyXS5ub2RlVmFsdWU7aWYocyl7cT1xLnJlcGxhY2UoL1xuL2csIiIpfXArPXF9ZWxzZXtpZih0LmNoaWxkTm9kZXNbcl0ubm9kZU5hbWU9PSJCUiIpe3ArPSJcbiJ9ZWxzZXtwKz1oKHQuY2hpbGROb2Rlc1tyXSl9fX1pZigvTVNJRSBbNjc4XS8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSl7cD1wLnJlcGxhY2UoL1xyL2csIlxuIil9cmV0dXJuIHB9ZnVuY3Rpb24gYShzKXt2YXIgcj1zLmNsYXNzTmFtZS5zcGxpdCgvXHMrLyk7cj1yLmNvbmNhdChzLnBhcmVudE5vZGUuY2xhc3NOYW1lLnNwbGl0KC9ccysvKSk7Zm9yKHZhciBxPTA7cTxyLmxlbmd0aDtxKyspe3ZhciBwPXJbcV0ucmVwbGFjZSgvXmxhbmd1YWdlLS8sIiIpO2lmKGVbcF0pe3JldHVybiBwfX19ZnVuY3Rpb24gYyhxKXt2YXIgcD1bXTsoZnVuY3Rpb24ocyx0KXtmb3IodmFyIHI9MDtyPHMuY2hpbGROb2Rlcy5sZW5ndGg7cisrKXtpZihzLmNoaWxkTm9kZXNbcl0ubm9kZVR5cGU9PTMpe3QrPXMuY2hpbGROb2Rlc1tyXS5ub2RlVmFsdWUubGVuZ3RofWVsc2V7aWYocy5jaGlsZE5vZGVzW3JdLm5vZGVOYW1lPT0iQlIiKXt0Kz0xfWVsc2V7aWYocy5jaGlsZE5vZGVzW3JdLm5vZGVUeXBlPT0xKXtwLnB1c2goe2V2ZW50OiJzdGFydCIsb2Zmc2V0OnQsbm9kZTpzLmNoaWxkTm9kZXNbcl19KTt0PWFyZ3VtZW50cy5jYWxsZWUocy5jaGlsZE5vZGVzW3JdLHQpO3AucHVzaCh7ZXZlbnQ6InN0b3AiLG9mZnNldDp0LG5vZGU6cy5jaGlsZE5vZGVzW3JdfSl9fX19cmV0dXJuIHR9KShxLDApO3JldHVybiBwfWZ1bmN0aW9uIGsoeSx3LHgpe3ZhciBxPTA7dmFyIHo9IiI7dmFyIHM9W107ZnVuY3Rpb24gdSgpe2lmKHkubGVuZ3RoJiZ3Lmxlbmd0aCl7aWYoeVswXS5vZmZzZXQhPXdbMF0ub2Zmc2V0KXtyZXR1cm4oeVswXS5vZmZzZXQ8d1swXS5vZmZzZXQpP3k6d31lbHNle3JldHVybiB3WzBdLmV2ZW50PT0ic3RhcnQiP3k6d319ZWxzZXtyZXR1cm4geS5sZW5ndGg/eTp3fX1mdW5jdGlvbiB0KEQpe3ZhciBBPSI8IitELm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7Zm9yKHZhciBCPTA7QjxELmF0dHJpYnV0ZXMubGVuZ3RoO0IrKyl7dmFyIEM9RC5hdHRyaWJ1dGVzW0JdO0ErPSIgIitDLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7aWYoQy52YWx1ZSE9PXVuZGVmaW5lZCYmQy52YWx1ZSE9PWZhbHNlJiZDLnZhbHVlIT09bnVsbCl7QSs9Jz0iJyttKEMudmFsdWUpKyciJ319cmV0dXJuIEErIj4ifXdoaWxlKHkubGVuZ3RofHx3Lmxlbmd0aCl7dmFyIHY9dSgpLnNwbGljZSgwLDEpWzBdO3orPW0oeC5zdWJzdHIocSx2Lm9mZnNldC1xKSk7cT12Lm9mZnNldDtpZih2LmV2ZW50PT0ic3RhcnQiKXt6Kz10KHYubm9kZSk7cy5wdXNoKHYubm9kZSl9ZWxzZXtpZih2LmV2ZW50PT0ic3RvcCIpe3ZhciBwLHI9cy5sZW5ndGg7ZG97ci0tO3A9c1tyXTt6Kz0oIjwvIitwLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkrIj4iKX13aGlsZShwIT12Lm5vZGUpO3Muc3BsaWNlKHIsMSk7d2hpbGUocjxzLmxlbmd0aCl7eis9dChzW3JdKTtyKyt9fX19cmV0dXJuIHorbSh4LnN1YnN0cihxKSl9ZnVuY3Rpb24gaigpe2Z1bmN0aW9uIHEoeCx5LHYpe2lmKHguY29tcGlsZWQpe3JldHVybn12YXIgdTt2YXIgcz1bXTtpZih4Lmspe3gubFI9Zih5LHgubHx8aGxqcy5JUix0cnVlKTtmb3IodmFyIHcgaW4geC5rKXtpZigheC5rLmhhc093blByb3BlcnR5KHcpKXtjb250aW51ZX1pZih4Lmtbd10gaW5zdGFuY2VvZiBPYmplY3Qpe3U9eC5rW3ddfWVsc2V7dT14Lms7dz0ia2V5d29yZCJ9Zm9yKHZhciByIGluIHUpe2lmKCF1Lmhhc093blByb3BlcnR5KHIpKXtjb250aW51ZX14Lmtbcl09W3csdVtyXV07cy5wdXNoKHIpfX19aWYoIXYpe2lmKHguYldLKXt4LmI9IlxcYigiK3Muam9pbigifCIpKyIpXFxzIn14LmJSPWYoeSx4LmI/eC5iOiJcXEJ8XFxiIik7aWYoIXguZSYmIXguZVcpe3guZT0iXFxCfFxcYiJ9aWYoeC5lKXt4LmVSPWYoeSx4LmUpfX1pZih4Lmkpe3guaVI9Zih5LHguaSl9aWYoeC5yPT09dW5kZWZpbmVkKXt4LnI9MX1pZigheC5jKXt4LmM9W119eC5jb21waWxlZD10cnVlO2Zvcih2YXIgdD0wO3Q8eC5jLmxlbmd0aDt0Kyspe2lmKHguY1t0XT09InNlbGYiKXt4LmNbdF09eH1xKHguY1t0XSx5LGZhbHNlKX1pZih4LnN0YXJ0cyl7cSh4LnN0YXJ0cyx5LGZhbHNlKX19Zm9yKHZhciBwIGluIGUpe2lmKCFlLmhhc093blByb3BlcnR5KHApKXtjb250aW51ZX1xKGVbcF0uZE0sZVtwXSx0cnVlKX19ZnVuY3Rpb24gZChCLEMpe2lmKCFqLmNhbGxlZCl7aigpO2ouY2FsbGVkPXRydWV9ZnVuY3Rpb24gcShyLE0pe2Zvcih2YXIgTD0wO0w8TS5jLmxlbmd0aDtMKyspe2lmKChNLmNbTF0uYlIuZXhlYyhyKXx8W251bGxdKVswXT09cil7cmV0dXJuIE0uY1tMXX19fWZ1bmN0aW9uIHYoTCxyKXtpZihEW0xdLmUmJkRbTF0uZVIudGVzdChyKSl7cmV0dXJuIDF9aWYoRFtMXS5lVyl7dmFyIE09dihMLTEscik7cmV0dXJuIE0/TSsxOjB9cmV0dXJuIDB9ZnVuY3Rpb24gdyhyLEwpe3JldHVybiBMLmkmJkwuaVIudGVzdChyKX1mdW5jdGlvbiBLKE4sTyl7dmFyIE09W107Zm9yKHZhciBMPTA7TDxOLmMubGVuZ3RoO0wrKyl7TS5wdXNoKE4uY1tMXS5iKX12YXIgcj1ELmxlbmd0aC0xO2Rve2lmKERbcl0uZSl7TS5wdXNoKERbcl0uZSl9ci0tfXdoaWxlKERbcisxXS5lVyk7aWYoTi5pKXtNLnB1c2goTi5pKX1yZXR1cm4gZihPLE0uam9pbigifCIpLHRydWUpfWZ1bmN0aW9uIHAoTSxMKXt2YXIgTj1EW0QubGVuZ3RoLTFdO2lmKCFOLnQpe04udD1LKE4sRSl9Ti50Lmxhc3RJbmRleD1MO3ZhciByPU4udC5leGVjKE0pO3JldHVybiByP1tNLnN1YnN0cihMLHIuaW5kZXgtTCksclswXSxmYWxzZV06W00uc3Vic3RyKEwpLCIiLHRydWVdfWZ1bmN0aW9uIHooTixyKXt2YXIgTD1FLmNJP3JbMF0udG9Mb3dlckNhc2UoKTpyWzBdO3ZhciBNPU4ua1tMXTtpZihNJiZNIGluc3RhbmNlb2YgQXJyYXkpe3JldHVybiBNfXJldHVybiBmYWxzZX1mdW5jdGlvbiBGKEwsUCl7TD1tKEwpO2lmKCFQLmspe3JldHVybiBMfXZhciByPSIiO3ZhciBPPTA7UC5sUi5sYXN0SW5kZXg9MDt2YXIgTT1QLmxSLmV4ZWMoTCk7d2hpbGUoTSl7cis9TC5zdWJzdHIoTyxNLmluZGV4LU8pO3ZhciBOPXooUCxNKTtpZihOKXt4Kz1OWzFdO3IrPSc8c3BhbiBjbGFzcz0iJytOWzBdKyciPicrTVswXSsiPC9zcGFuPiJ9ZWxzZXtyKz1NWzBdfU89UC5sUi5sYXN0SW5kZXg7TT1QLmxSLmV4ZWMoTCl9cmV0dXJuIHIrTC5zdWJzdHIoTyxMLmxlbmd0aC1PKX1mdW5jdGlvbiBKKEwsTSl7aWYoTS5zTCYmZVtNLnNMXSl7dmFyIHI9ZChNLnNMLEwpO3grPXIua2V5d29yZF9jb3VudDtyZXR1cm4gci52YWx1ZX1lbHNle3JldHVybiBGKEwsTSl9fWZ1bmN0aW9uIEkoTSxyKXt2YXIgTD1NLmNOPyc8c3BhbiBjbGFzcz0iJytNLmNOKyciPic6IiI7aWYoTS5yQil7eSs9TDtNLmJ1ZmZlcj0iIn1lbHNle2lmKE0uZUIpe3krPW0ocikrTDtNLmJ1ZmZlcj0iIn1lbHNle3krPUw7TS5idWZmZXI9cn19RC5wdXNoKE0pO0ErPU0ucn1mdW5jdGlvbiBHKE4sTSxRKXt2YXIgUj1EW0QubGVuZ3RoLTFdO2lmKFEpe3krPUooUi5idWZmZXIrTixSKTtyZXR1cm4gZmFsc2V9dmFyIFA9cShNLFIpO2lmKFApe3krPUooUi5idWZmZXIrTixSKTtJKFAsTSk7cmV0dXJuIFAuckJ9dmFyIEw9dihELmxlbmd0aC0xLE0pO2lmKEwpe3ZhciBPPVIuY04/Ijwvc3Bhbj4iOiIiO2lmKFIuckUpe3krPUooUi5idWZmZXIrTixSKStPfWVsc2V7aWYoUi5lRSl7eSs9SihSLmJ1ZmZlcitOLFIpK08rbShNKX1lbHNle3krPUooUi5idWZmZXIrTitNLFIpK099fXdoaWxlKEw+MSl7Tz1EW0QubGVuZ3RoLTJdLmNOPyI8L3NwYW4+IjoiIjt5Kz1PO0wtLTtELmxlbmd0aC0tfXZhciByPURbRC5sZW5ndGgtMV07RC5sZW5ndGgtLTtEW0QubGVuZ3RoLTFdLmJ1ZmZlcj0iIjtpZihyLnN0YXJ0cyl7SShyLnN0YXJ0cywiIil9cmV0dXJuIFIuckV9aWYodyhNLFIpKXt0aHJvdyJJbGxlZ2FsIn19dmFyIEU9ZVtCXTt2YXIgRD1bRS5kTV07dmFyIEE9MDt2YXIgeD0wO3ZhciB5PSIiO3RyeXt2YXIgcyx1PTA7RS5kTS5idWZmZXI9IiI7ZG97cz1wKEMsdSk7dmFyIHQ9RyhzWzBdLHNbMV0sc1syXSk7dSs9c1swXS5sZW5ndGg7aWYoIXQpe3UrPXNbMV0ubGVuZ3RofX13aGlsZSghc1syXSk7aWYoRC5sZW5ndGg+MSl7dGhyb3ciSWxsZWdhbCJ9cmV0dXJue3I6QSxrZXl3b3JkX2NvdW50OngsdmFsdWU6eX19Y2F0Y2goSCl7aWYoSD09IklsbGVnYWwiKXtyZXR1cm57cjowLGtleXdvcmRfY291bnQ6MCx2YWx1ZTptKEMpfX1lbHNle3Rocm93IEh9fX1mdW5jdGlvbiBnKHQpe3ZhciBwPXtrZXl3b3JkX2NvdW50OjAscjowLHZhbHVlOm0odCl9O3ZhciByPXA7Zm9yKHZhciBxIGluIGUpe2lmKCFlLmhhc093blByb3BlcnR5KHEpKXtjb250aW51ZX12YXIgcz1kKHEsdCk7cy5sYW5ndWFnZT1xO2lmKHMua2V5d29yZF9jb3VudCtzLnI+ci5rZXl3b3JkX2NvdW50K3Iucil7cj1zfWlmKHMua2V5d29yZF9jb3VudCtzLnI+cC5rZXl3b3JkX2NvdW50K3Aucil7cj1wO3A9c319aWYoci5sYW5ndWFnZSl7cC5zZWNvbmRfYmVzdD1yfXJldHVybiBwfWZ1bmN0aW9uIGkocixxLHApe2lmKHEpe3I9ci5yZXBsYWNlKC9eKCg8W14+XSs+fFx0KSspL2dtLGZ1bmN0aW9uKHQsdyx2LHUpe3JldHVybiB3LnJlcGxhY2UoL1x0L2cscSl9KX1pZihwKXtyPXIucmVwbGFjZSgvXG4vZywiPGJyPiIpfXJldHVybiByfWZ1bmN0aW9uIG4odCx3LHIpe3ZhciB4PWgodCxyKTt2YXIgdj1hKHQpO3ZhciB5LHM7aWYodil7eT1kKHYseCl9ZWxzZXtyZXR1cm59dmFyIHE9Yyh0KTtpZihxLmxlbmd0aCl7cz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJwcmUiKTtzLmlubmVySFRNTD15LnZhbHVlO3kudmFsdWU9ayhxLGMocykseCl9eS52YWx1ZT1pKHkudmFsdWUsdyxyKTt2YXIgdT10LmNsYXNzTmFtZTtpZighdS5tYXRjaCgiKFxcc3xeKShsYW5ndWFnZS0pPyIrdisiKFxcc3wkKSIpKXt1PXU/KHUrIiAiK3YpOnZ9aWYoL01TSUUgWzY3OF0vLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkmJnQudGFnTmFtZT09IkNPREUiJiZ0LnBhcmVudE5vZGUudGFnTmFtZT09IlBSRSIpe3M9dC5wYXJlbnROb2RlO3ZhciBwPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpO3AuaW5uZXJIVE1MPSI8cHJlPjxjb2RlPiIreS52YWx1ZSsiPC9jb2RlPjwvcHJlPiI7dD1wLmZpcnN0Q2hpbGQuZmlyc3RDaGlsZDtwLmZpcnN0Q2hpbGQuY049cy5jTjtzLnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKHAuZmlyc3RDaGlsZCxzKX1lbHNle3QuaW5uZXJIVE1MPXkudmFsdWV9dC5jbGFzc05hbWU9dTt0LnJlc3VsdD17bGFuZ3VhZ2U6dixrdzp5LmtleXdvcmRfY291bnQscmU6eS5yfTtpZih5LnNlY29uZF9iZXN0KXt0LnNlY29uZF9iZXN0PXtsYW5ndWFnZTp5LnNlY29uZF9iZXN0Lmxhbmd1YWdlLGt3Onkuc2Vjb25kX2Jlc3Qua2V5d29yZF9jb3VudCxyZTp5LnNlY29uZF9iZXN0LnJ9fX1mdW5jdGlvbiBvKCl7aWYoby5jYWxsZWQpe3JldHVybn1vLmNhbGxlZD10cnVlO3ZhciByPWRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCJwcmUiKTtmb3IodmFyIHA9MDtwPHIubGVuZ3RoO3ArKyl7dmFyIHE9YihyW3BdKTtpZihxKXtuKHEsaGxqcy50YWJSZXBsYWNlKX19fWZ1bmN0aW9uIGwoKXtpZih3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcil7d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoIkRPTUNvbnRlbnRMb2FkZWQiLG8sZmFsc2UpO3dpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJsb2FkIixvLGZhbHNlKX1lbHNle2lmKHdpbmRvdy5hdHRhY2hFdmVudCl7d2luZG93LmF0dGFjaEV2ZW50KCJvbmxvYWQiLG8pfWVsc2V7d2luZG93Lm9ubG9hZD1vfX19dmFyIGU9e307dGhpcy5MQU5HVUFHRVM9ZTt0aGlzLmhpZ2hsaWdodD1kO3RoaXMuaGlnaGxpZ2h0QXV0bz1nO3RoaXMuZml4TWFya3VwPWk7dGhpcy5oaWdobGlnaHRCbG9jaz1uO3RoaXMuaW5pdEhpZ2hsaWdodGluZz1vO3RoaXMuaW5pdEhpZ2hsaWdodGluZ09uTG9hZD1sO3RoaXMuSVI9IlthLXpBLVpdW2EtekEtWjAtOV9dKiI7dGhpcy5VSVI9IlthLXpBLVpfXVthLXpBLVowLTlfXSoiO3RoaXMuTlI9IlxcYlxcZCsoXFwuXFxkKyk/Ijt0aGlzLkNOUj0iXFxiKDBbeFhdW2EtZkEtRjAtOV0rfChcXGQrKFxcLlxcZCopP3xcXC5cXGQrKShbZUVdWy0rXT9cXGQrKT8pIjt0aGlzLkJOUj0iXFxiKDBiWzAxXSspIjt0aGlzLlJTUj0iIXwhPXwhPT18JXwlPXwmfCYmfCY9fFxcKnxcXCo9fFxcK3xcXCs9fCx8XFwufC18LT18L3wvPXw6fDt8PHw8PHw8PD18PD18PXw9PXw9PT18Pnw+PXw+Pnw+Pj18Pj4+fD4+Pj18XFw/fFxcW3xcXHt8XFwofFxcXnxcXF49fFxcfHxcXHw9fFxcfFxcfHx+Ijt0aGlzLkVSPSIoPyFbXFxzXFxTXSkiO3RoaXMuQkU9e2I6IlxcXFwuIixyOjB9O3RoaXMuQVNNPXtjTjoic3RyaW5nIixiOiInIixlOiInIixpOiJcXG4iLGM6W3RoaXMuQkVdLHI6MH07dGhpcy5RU009e2NOOiJzdHJpbmciLGI6JyInLGU6JyInLGk6IlxcbiIsYzpbdGhpcy5CRV0scjowfTt0aGlzLkNMQ009e2NOOiJjb21tZW50IixiOiIvLyIsZToiJCJ9O3RoaXMuQ0JMQ0xNPXtjTjoiY29tbWVudCIsYjoiL1xcKiIsZToiXFwqLyJ9O3RoaXMuSENNPXtjTjoiY29tbWVudCIsYjoiIyIsZToiJCJ9O3RoaXMuTk09e2NOOiJudW1iZXIiLGI6dGhpcy5OUixyOjB9O3RoaXMuQ05NPXtjTjoibnVtYmVyIixiOnRoaXMuQ05SLHI6MH07dGhpcy5CTk09e2NOOiJudW1iZXIiLGI6dGhpcy5CTlIscjowfTt0aGlzLmluaGVyaXQ9ZnVuY3Rpb24ocixzKXt2YXIgcD17fTtmb3IodmFyIHEgaW4gcil7cFtxXT1yW3FdfWlmKHMpe2Zvcih2YXIgcSBpbiBzKXtwW3FdPXNbcV19fXJldHVybiBwfX0oKTtobGpzLkxBTkdVQUdFUy5jcHA9ZnVuY3Rpb24oKXt2YXIgYT17a2V5d29yZDp7ImZhbHNlIjoxLCJpbnQiOjEsImZsb2F0IjoxLCJ3aGlsZSI6MSwicHJpdmF0ZSI6MSwiY2hhciI6MSwiY2F0Y2giOjEsImV4cG9ydCI6MSx2aXJ0dWFsOjEsb3BlcmF0b3I6MixzaXplb2Y6MixkeW5hbWljX2Nhc3Q6Mix0eXBlZGVmOjIsY29uc3RfY2FzdDoyLCJjb25zdCI6MSxzdHJ1Y3Q6MSwiZm9yIjoxLHN0YXRpY19jYXN0OjIsdW5pb246MSxuYW1lc3BhY2U6MSx1bnNpZ25lZDoxLCJsb25nIjoxLCJ0aHJvdyI6MSwidm9sYXRpbGUiOjIsInN0YXRpYyI6MSwicHJvdGVjdGVkIjoxLGJvb2w6MSx0ZW1wbGF0ZToxLG11dGFibGU6MSwiaWYiOjEsInB1YmxpYyI6MSxmcmllbmQ6MiwiZG8iOjEsInJldHVybiI6MSwiZ290byI6MSxhdXRvOjEsInZvaWQiOjIsImVudW0iOjEsImVsc2UiOjEsImJyZWFrIjoxLCJuZXciOjEsZXh0ZXJuOjEsdXNpbmc6MSwidHJ1ZSI6MSwiY2xhc3MiOjEsYXNtOjEsImNhc2UiOjEsdHlwZWlkOjEsInNob3J0IjoxLHJlaW50ZXJwcmV0X2Nhc3Q6MiwiZGVmYXVsdCI6MSwiZG91YmxlIjoxLHJlZ2lzdGVyOjEsZXhwbGljaXQ6MSxzaWduZWQ6MSx0eXBlbmFtZToxLCJ0cnkiOjEsInRoaXMiOjEsInN3aXRjaCI6MSwiY29udGludWUiOjEsd2NoYXJfdDoxLGlubGluZToxLCJkZWxldGUiOjEsYWxpZ25vZjoxLGNoYXIxNl90OjEsY2hhcjMyX3Q6MSxjb25zdGV4cHI6MSxkZWNsdHlwZToxLG5vZXhjZXB0OjEsbnVsbHB0cjoxLHN0YXRpY19hc3NlcnQ6MSx0aHJlYWRfbG9jYWw6MSxyZXN0cmljdDoxLF9Cb29sOjEsY29tcGxleDoxfSxidWlsdF9pbjp7c3RkOjEsc3RyaW5nOjEsY2luOjEsY291dDoxLGNlcnI6MSxjbG9nOjEsc3RyaW5nc3RyZWFtOjEsaXN0cmluZ3N0cmVhbToxLG9zdHJpbmdzdHJlYW06MSxhdXRvX3B0cjoxLGRlcXVlOjEsbGlzdDoxLHF1ZXVlOjEsc3RhY2s6MSx2ZWN0b3I6MSxtYXA6MSxzZXQ6MSxiaXRzZXQ6MSxtdWx0aXNldDoxLG11bHRpbWFwOjEsdW5vcmRlcmVkX3NldDoxLHVub3JkZXJlZF9tYXA6MSx1bm9yZGVyZWRfbXVsdGlzZXQ6MSx1bm9yZGVyZWRfbXVsdGltYXA6MSxhcnJheToxLHNoYXJlZF9wdHI6MX19O3JldHVybntkTTp7azphLGk6IjwvIixjOltobGpzLkNMQ00saGxqcy5DQkxDTE0saGxqcy5RU00se2NOOiJzdHJpbmciLGI6IidcXFxcPy4iLGU6IiciLGk6Ii4ifSx7Y046Im51bWJlciIsYjoiXFxiKFxcZCsoXFwuXFxkKik/fFxcLlxcZCspKHV8VXxsfEx8dWx8VUx8ZnxGKSJ9LGhsanMuQ05NLHtjTjoicHJlcHJvY2Vzc29yIixiOiIjIixlOiIkIn0se2NOOiJzdGxfY29udGFpbmVyIixiOiJcXGIoZGVxdWV8bGlzdHxxdWV1ZXxzdGFja3x2ZWN0b3J8bWFwfHNldHxiaXRzZXR8bXVsdGlzZXR8bXVsdGltYXB8dW5vcmRlcmVkX21hcHx1bm9yZGVyZWRfc2V0fHVub3JkZXJlZF9tdWx0aXNldHx1bm9yZGVyZWRfbXVsdGltYXB8YXJyYXkpXFxzKjwiLGU6Ij4iLGs6YSxyOjEwLGM6WyJzZWxmIl19XX19fSgpO2hsanMuTEFOR1VBR0VTLnI9e2RNOntjOltobGpzLkhDTSx7Y046Im51bWJlciIsYjoiXFxiMFt4WF1bMC05YS1mQS1GXStbTGldP1xcYiIsZTpobGpzLklNTUVESUFURV9SRSxyOjB9LHtjTjoibnVtYmVyIixiOiJcXGJcXGQrKD86W2VFXVsrXFwtXT9cXGQqKT9MXFxiIixlOmhsanMuSU1NRURJQVRFX1JFLHI6MH0se2NOOiJudW1iZXIiLGI6IlxcYlxcZCtcXC4oPyFcXGQpKD86aVxcYik/IixlOmhsanMuSU1NRURJQVRFX1JFLHI6MX0se2NOOiJudW1iZXIiLGI6IlxcYlxcZCsoPzpcXC5cXGQqKT8oPzpbZUVdWytcXC1dP1xcZCopP2k/XFxiIixlOmhsanMuSU1NRURJQVRFX1JFLHI6MH0se2NOOiJudW1iZXIiLGI6IlxcLlxcZCsoPzpbZUVdWytcXC1dP1xcZCopP2k/XFxiIixlOmhsanMuSU1NRURJQVRFX1JFLHI6MX0se2NOOiJrZXl3b3JkIixiOiIoPzp0cnlDYXRjaHxsaWJyYXJ5fHNldEdlbmVyaWN8c2V0R3JvdXBHZW5lcmljKVxcYiIsZTpobGpzLklNTUVESUFURV9SRSxyOjEwfSx7Y046ImtleXdvcmQiLGI6IlxcLlxcLlxcLiIsZTpobGpzLklNTUVESUFURV9SRSxyOjEwfSx7Y046ImtleXdvcmQiLGI6IlxcLlxcLlxcZCsoPyFbXFx3Ll0pIixlOmhsanMuSU1NRURJQVRFX1JFLHI6MTB9LHtjTjoia2V5d29yZCIsYjoiXFxiKD86ZnVuY3Rpb24pIixlOmhsanMuSU1NRURJQVRFX1JFLHI6Mn0se2NOOiJrZXl3b3JkIixiOiIoPzppZnxpbnxicmVha3xuZXh0fHJlcGVhdHxlbHNlfGZvcnxyZXR1cm58c3dpdGNofHdoaWxlfHRyeXxzdG9wfHdhcm5pbmd8cmVxdWlyZXxhdHRhY2h8ZGV0YWNofHNvdXJjZXxzZXRNZXRob2R8c2V0Q2xhc3MpXFxiIixlOmhsanMuSU1NRURJQVRFX1JFLHI6MX0se2NOOiJsaXRlcmFsIixiOiIoPzpOQXxOQV9pbnRlZ2VyX3xOQV9yZWFsX3xOQV9jaGFyYWN0ZXJffE5BX2NvbXBsZXhfKVxcYiIsZTpobGpzLklNTUVESUFURV9SRSxyOjEwfSx7Y046ImxpdGVyYWwiLGI6Iig/Ok5VTEx8VFJVRXxGQUxTRXxUfEZ8SW5mfE5hTilcXGIiLGU6aGxqcy5JTU1FRElBVEVfUkUscjoxfSx7Y046ImlkZW50aWZpZXIiLGI6IlthLXpBLVouXVthLXpBLVowLTkuX10qXFxiIixlOmhsanMuSU1NRURJQVRFX1JFLHI6MH0se2NOOiJvcGVyYXRvciIsYjoiPFxcLSg/IVxccypcXGQpIixlOmhsanMuSU1NRURJQVRFX1JFLHI6Mn0se2NOOiJvcGVyYXRvciIsYjoiXFwtPnw8XFwtIixlOmhsanMuSU1NRURJQVRFX1JFLHI6MX0se2NOOiJvcGVyYXRvciIsYjoiJSV8fiIsZTpobGpzLklNTUVESUFURV9SRX0se2NOOiJvcGVyYXRvciIsYjoiPj18PD18PT18IT18XFx8XFx8fCYmfD18XFwrfFxcLXxcXCp8L3xcXF58Pnw8fCF8JnxcXHx8XFwkfDoiLGU6aGxqcy5JTU1FRElBVEVfUkUscjowfSx7Y046Im9wZXJhdG9yIixiOiIlIixlOiIlIixpOiJcXG4iLHI6MX0se2NOOiJpZGVudGlmaWVyIixiOiJgIixlOiJgIixyOjB9LHtjTjoic3RyaW5nIixiOiciJyxlOiciJyxjOltobGpzLkJFXSxyOjB9LHtjTjoic3RyaW5nIixiOiInIixlOiInIixjOltobGpzLkJFXSxyOjB9LHtjTjoicGFyZW4iLGI6IltbKHtcXF0pfV0iLGU6aGxqcy5JTU1FRElBVEVfUkUscjowfV19fTsKaGxqcy5pbml0SGlnaGxpZ2h0aW5nT25Mb2FkKCk7Cgo="></script>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs && document.readyState && document.readyState === "complete") {
   window.setTimeout(function() {
      hljs.initHighlighting();
   }, 0);
}
</script>


<link href="data:text/css;charset=utf-8,body%2C%20td%20%7B%0Afont%2Dfamily%3A%20sans%2Dserif%3B%0Abackground%2Dcolor%3A%20white%3B%0Afont%2Dsize%3A%2013px%3B%0A%7D%0Abody%20%7B%0Amax%2Dwidth%3A%20800px%3B%0Amargin%3A%200%20auto%3B%0Apadding%3A%201em%201em%202em%3B%0Aline%2Dheight%3A%2020px%3B%0A%7D%0A%0Adiv%23TOC%20li%20%7B%0Alist%2Dstyle%3Anone%3B%0Abackground%2Dimage%3Anone%3B%0Abackground%2Drepeat%3Anone%3B%0Abackground%2Dposition%3A0%3B%0A%7D%0A%0Ap%2C%20pre%20%7B%20margin%3A%200em%200em%201em%3B%0A%7D%0A%0Aimg%2C%20table%20%7B%0Amargin%3A%200em%20auto%201em%3B%0A%7D%0Ap%20%7B%0Atext%2Dalign%3A%20justify%3B%0A%7D%0Att%2C%20code%2C%20pre%20%7B%0Afont%2Dfamily%3A%20%27DejaVu%20Sans%20Mono%27%2C%20%27Droid%20Sans%20Mono%27%2C%20%27Lucida%20Console%27%2C%20Consolas%2C%20Monaco%2C%20monospace%3B%0A%7D%0Ah1%2C%20h2%2C%20h3%2C%20h4%2C%20h5%2C%20h6%20%7B%20font%2Dfamily%3A%20Helvetica%2C%20Arial%2C%20sans%2Dserif%3B%0Amargin%3A%201%2E2em%200em%200%2E6em%200em%3B%0Afont%2Dweight%3A%20bold%3B%0A%7D%0Ah1%2Etitle%20%7B%0Afont%2Dsize%3A%20250%25%3B%0Afont%2Dweight%3A%20normal%3B%0Acolor%3A%20%2387b13f%3B%0Aline%2Dheight%3A%201%2E1em%3B%0Amargin%2Dtop%3A%200px%3B%0Aborder%2Dbottom%3A%200px%3B%0A%7D%0Ah1%20%7B%0Afont%2Dsize%3A%20160%25%3B%0Afont%2Dweight%3A%20normal%3B%0Aline%2Dheight%3A%201%2E4em%3B%0Aborder%2Dbottom%3A%201px%20%231a81c2%20solid%3B%0A%7D%0Ah2%20%7B%0Afont%2Dsize%3A%20130%25%3B%20%7D%0Ah1%2C%20h2%2C%20h3%20%7B%0Acolor%3A%20%231a81c2%3B%0A%7D%0Ah3%2C%20h4%2C%20h5%2C%20h6%20%7B%0Afont%2Dsize%3A115%25%3B%0A%7D%20%0A%0Aa%20%7B%20color%3A%20%231a81c2%3B%20%7D%0Aa%3Aactive%20%7B%20outline%3A%20none%3B%20%7D%0Aa%3Avisited%20%7B%20color%3A%20%231a81c2%3B%20%7D%0Aa%3Ahover%20%7B%20color%3A%20%234c94c2%3B%20%7D%0Apre%2C%20img%20%7B%0Amax%2Dwidth%3A%20100%25%3B%0Adisplay%3A%20block%3B%0A%7D%0Apre%20%7B%0Aborder%3A%200px%20none%3B%0Abackground%2Dcolor%3A%20%23F8F8F8%3B%0Awhite%2Dspace%3A%20pre%3B%0Aoverflow%2Dx%3A%20auto%3B%0A%7D%0Apre%20code%20%7B%0Aborder%3A%201px%20%23aaa%20dashed%3B%0Abackground%2Dcolor%3A%20white%3B%0Adisplay%3A%20block%3B%0Apadding%3A%201em%3B%20color%3A%20%23111%3B%0Aoverflow%2Dx%3A%20inherit%3B%0A%7D%0A%0Apre%20code%5Bclass%5D%20%7B%0Abackground%2Dcolor%3A%20inherit%3B%0A%7D%0A%0Apre%5Bclass%5D%20code%20%7B%0Abackground%2Dcolor%3A%20inherit%3B%0A%7D%0A%0Acode%20%7B%20background%2Dcolor%3A%20transparent%3B%0Acolor%3A%20%2387b13f%3B%0Afont%2Dsize%3A%2092%25%3B%0A%7D%0A%0Atable%2C%20td%2C%20th%20%7B%0Aborder%3A%20none%3B%0Apadding%3A%200%200%2E5em%3B%0A%7D%0A%0Atbody%20tr%3Anth%2Dchild%28odd%29%20td%20%7B%0Abackground%2Dcolor%3A%20%23F8F8F8%3B%0A%7D%0Ablockquote%20%7B%0Acolor%3A%23666666%3B%0Amargin%3A0%3B%0Apadding%2Dleft%3A%201em%3B%0Aborder%2Dleft%3A%200%2E5em%20%23EEE%20solid%3B%0A%7D%0Ahr%20%7B%0Aheight%3A%200px%3B%0Aborder%2Dbottom%3A%20none%3B%0Aborder%2Dtop%2Dwidth%3A%20thin%3B%0Aborder%2Dtop%2Dstyle%3A%20dotted%3B%0Aborder%2Dtop%2Dcolor%3A%20%23999999%3B%0A%7D%0Aspan%2Eheader%2Dsection%2Dnumber%20%7B%0Apadding%2Dright%3A%201em%3B%0A%7D%0Aspan%2Etoc%2Dsection%2Dnumber%3A%3Aafter%20%7B%0Acontent%3A%20%22%20%22%3B%0Awhite%2Dspace%3A%20pre%3B%0A%7D%0A%40media%20print%20%7B%0A%2A%20%7B%0Abackground%3A%20transparent%20%21important%3B%0Acolor%3A%20black%20%21important%3B%0Afilter%3Anone%20%21important%3B%0A%2Dms%2Dfilter%3A%20none%20%21important%3B%0A%7D%0Abody%20%7B%0Afont%2Dsize%3A12pt%3B%0Amax%2Dwidth%3A100%25%3B%0A%7D%0Aa%2C%20a%3Avisited%20%7B%0Atext%2Ddecoration%3A%20underline%3B%0A%7D%0Ahr%20%7B%0Avisibility%3A%20hidden%3B%0Apage%2Dbreak%2Dbefore%3A%20always%3B%0A%7D%0Apre%2C%20blockquote%20%7B%0Apadding%2Dright%3A%201em%3B%0Apage%2Dbreak%2Dinside%3A%20avoid%3B%0A%7D%0Atr%2C%20img%20%7B%0Apage%2Dbreak%2Dinside%3A%20avoid%3B%0A%7D%0Aimg%20%7B%0Amax%2Dwidth%3A%20100%25%20%21important%3B%0A%7D%0A%40page%20%3Aleft%20%7B%0Amargin%3A%2015mm%2020mm%2015mm%2010mm%3B%0A%7D%0A%40page%20%3Aright%20%7B%0Amargin%3A%2015mm%2010mm%2015mm%2020mm%3B%0A%7D%0Ap%2C%20h2%2C%20h3%20%7B%0Aorphans%3A%203%3B%20widows%3A%203%3B%0A%7D%0Ah2%2C%20h3%20%7B%0Apage%2Dbreak%2Dafter%3A%20avoid%3B%0A%7D%0A%7D%0A" rel="stylesheet" type="text/css" />

<script type="text/javascript">
document.addEventListener("DOMContentLoaded", function() {
  var links = document.links;  
  for (var i = 0, linksLength = links.length; i < linksLength; i++)
    if(links[i].hostname != window.location.hostname)
      links[i].target = '_blank';
});
</script>

</head>

<body>


<div id="header">
<h1 class="title">Filematrix vs. bigmemory (packages)</h1>
<h4 class="author"><em>Andrey A Shabalin</em></h4>
<h4 class="date"><em>23 May 2016</em></h4>
</div>
<h4 class="package">Package version: <span style="font-weight: normal">filematrix 1.1.0</span></h4>

<h1>Contents</h1>
<div id="TOC">
<ul>
<li><a href="#motivation-for-creation-of-filematrix-package"><span class="toc-section-number">1</span> Motivation for creation of <code>filematrix</code> package</a><ul>
<li><a href="#differences-between-filematrix-and-bigmemory-packages"><span class="toc-section-number">1.1</span> Differences between <code>filematrix</code> and <code>bigmemory</code> packages</a></li>
<li><a href="#differences-in-tests"><span class="toc-section-number">1.2</span> Differences in tests</a></li>
<li><a href="#example-when-filematrix-is-much-more-efficient-than-bigmemory"><span class="toc-section-number">1.3</span> Example when <code>filematrix</code> is much more efficient than <code>bigmemory</code></a></li>
</ul></li>
</ul>
</div>

<div id="motivation-for-creation-of-filematrix-package" class="section level1">
<h1><span class="header-section-number">1</span> Motivation for creation of <code>filematrix</code> package</h1>
<p>The <code>filematrix</code> package was originally conceived as an alternative to <code>bigmemory</code> package for two reasons. First, matrices created with <code>bigmemory</code> on NFS (network file system) have often been <strong>corrupted</strong> (contained all zeros). This is most likely a fault of memory-mapped files on NFS. Second, <code>bigmemory</code> was <strong>not available for Windows</strong> initially. It is now fully cross platform.</p>
<div id="differences-between-filematrix-and-bigmemory-packages" class="section level2">
<h2><span class="header-section-number">1.1</span> Differences between <code>filematrix</code> and <code>bigmemory</code> packages</h2>
<p>The packages use different libraries to read from and write to their big files. <code>filematrix</code> uses <code>readBin</code> and <code>writeBin</code> R functions. <code>bigmemory</code> uses memory-mapped file access via <code>BH</code> R package (Boost C++).</p>
<p>Also, <code>filematrix</code> can store real values in <code>short</code> 4 byte format. This feature is not available in <code>bigmemory</code>.</p>
</div>
<div id="differences-in-tests" class="section level2">
<h2><span class="header-section-number">1.2</span> Differences in tests</h2>
<p>Due to different file access approach:</p>
<ul>
<li><code>bigmemory</code> accumulates changes to the matrix in memory and writes them to the file upon call of <code>flush</code> or file closure.</li>
<li><code>filematrix</code> writes the changes to the file upon the request without delay.</li>
</ul>
<p>Consequently:</p>
<ul>
<li><code>bigmemory</code> works well for matrices smaller than the system memory. Writing to larger matrices is much slower due to system trying to keep as much of the matrix in the system memory (cache) as possible.</li>
<li><p><code>filematrix</code>’s performance does not deteriorate on matrices many times larger than the system memory.</p></li>
<li><code>bigmemory</code> is better for random access of the file matrices.</li>
<li><p><code>filematrix</code> is equally good or better for block and column-wise access of the file matrices.</p></li>
</ul>
</div>
<div id="example-when-filematrix-is-much-more-efficient-than-bigmemory" class="section level2">
<h2><span class="header-section-number">1.3</span> Example when <code>filematrix</code> is much more efficient than <code>bigmemory</code></h2>
<p>Let us consider a simple task of filling in a large matrix (twice memory size). Below is the code using <code>filematrix</code>. It finishes in 10 minutes and does not interfere with other programs.</p>
<pre class="r"><code>library(filematrix)
fm = fm.create('E:/big_fm', nrow = 1e5, ncol = 1e5)

tic = proc.time()
for( i in seq_len(ncol(fm)) ) {
    cat(i, &quot;of&quot;, ncol(fm), &quot;\n&quot;)
    fm[,i] = i + 1:nrow(fm)
}
toc = proc.time()
show(toc-tic)

# Cleanup

closeAndDeleteFiles(fm)</code></pre>
<p>Filling the same sized big matrix with <code>bigmemory</code> can be very slow (<strong>2.5 times</strong> slow in this experiment). The <code>bigmemory</code> package uses memory mapped file technique to access the file. When the matrix is written to, the memory mapped file occupies all available RAM and the computer <strong>slows to a halt</strong>. <img src="data:image/png;base64,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" alt="Task Manager shows the memory mapped file occupy all available RAM when filling a large matrix with bigmemory package." /></p>
<p>Please excercise caution when running the code below.</p>
<pre class="r"><code>library(bigmemory)
fm = filebacked.big.matrix(nrow = 1e5, ncol = 1e5, 
                                  type = 'double', backingfile = 'big_bm.bmat',
                                  backingpath = 'E:/', descriptorfile = 'big_bm.desc.txt')

tic = proc.time()
for( i in seq_len(ncol(fm)) ) {
    cat(i, &quot;of&quot;, ncol(fm), &quot;\n&quot;)
    fm[,i] = i + 1:nrow(fm)
}
flush(fm)
toc = proc.time()
show(toc-tic)

# Cleanup

rm(fm)
gc()
unlink('E:/big_bm.bmat')
unlink('E:/big_bm.desc.txt')</code></pre>
</div>
</div>



<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
