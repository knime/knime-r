<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><title>R: Windows-specific changes to R</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link rel="stylesheet" type="text/css" href="R.css">
</head><body>

<table width="100%" summary="page for CHANGES"><tr><td>CHANGES</td><td align="right">R Documentation</td></tr></table>

<h2>Windows-specific changes to R</h2>

<h3>CHANGES IN R VERSION 2.12.0</h3>

<p>


<h4>NEW FEATURES</h4>

<p>

<ul>
<li> A sub-architecture is used for 32-bit (i386) as well as
64-bit (x64) builds.  32-bit packages containing compiled code
need to re-installed for this release (64-bit packages built
for 2.11.x will most likely still work).
</p>
<p>
Architecture-specific files (such as &lsquo;<span class="file">Rgui.exe</span>&rsquo; and
&lsquo;<span class="file">Rscript.exe</span>&rsquo;) are now in &lsquo;<span class="file">R_HOME/bin/i386</span>&rsquo; or
&lsquo;<span class="file">R_HOME/bin/x64</span>&rsquo;.
</p>
<p>
Because many people expect it, there is an executable
&lsquo;<span class="file">R_HOME/bin/R.exe</span>&rsquo;, which accepts <span class="option">--arch</span> and
launches either &lsquo;<span class="file">R_HOME/bin/i386/R.exe</span>&rsquo; or
&lsquo;<span class="file">R_HOME/bin/x64/R.exe</span>&rsquo;, and analogously for
&lsquo;<span class="file">Rscript.exe</span>&rsquo;.  If not specified by their argument
<span class="option">--arch</span>, these check the environment variable
<span class="env">R_ARCH</span> for the architecture to use.
</p>
<p>
</li>
<li>The <CODE>Rgui</CODE> console now has an optional blinking
caret (cursor) to assist screen readers for the visually
impaired.
</p>
<p>
</li>
<li><code>normalizePath()</code> now signals a warning instead of an
error when the input path does not exist.  It attempts partial
normalization, or if that fails, returns the original input.
</p>
<p>
</li>
<li>All the <CODE>Rcmd</CODE> sub-commands except <code>config</code> and
<code>Sd2d</code> are now handled internally rather by shell scripts.
</p>
<p>
</li>
<li><CODE>Rcmd</CODE> has a new sub-command <CODE>texify</CODE> to run
MiKTeX's &lsquo;<span class="file">texify.exe</span>&rsquo; with arguments to find files such as
&lsquo;<span class="file">Sweave.sty</span>&rsquo;.  See the examples in <code>?Sweave</code>.
</p>
<p>
</li>
<li><code>system(intern = FALSE)</code> now returns <code>127</code> (the
same as Unix-alikes) rather than <code>-1</code> if the command cannot
be run, and (like Unix-alikes) no longer gives a warning.
</p>
<p>
</li>
<li><CODE>Rscript -e</CODE> and similar use a temporary file, and
now work harder to ensure that filename is not the same as some
other simultaneous <font face="Courier New,Courier" color="#666666"><b>R</b></font> process.
</ul>

</p>



<h4>INSTALLATION</h4>

<p>

<ul>
<li> The preferred toolchain for 32-bit builds (including
packages) is now based on <CODE>gcc 4.5.0</CODE>: see the &lsquo;R
Installation and Administration Manual&rsquo;.
</p>
<p>
</li>
<li>It is now possible to build <font face="Courier New,Courier" color="#666666"><b>R</b></font> and the standard installer
without Perl: only maintainer-mode tasks now need Perl.
</ul>

</p>



<h4>64-bit NEWS</h4>

<p>

<ul>
<li> The 32- and 64-bit distributions have been merged:
</p>
<p>
There is a combined installer (called
&lsquo;<span class="file">R-&lt;version&gt;-win.exe</span>&rsquo;).  When used under 32-bit Windows
this works as before and installs 32-bit <font face="Courier New,Courier" color="#666666"><b>R</b></font>.  When used under
64-bit Windows there are options to install either or both of
32- and 64-bit <font face="Courier New,Courier" color="#666666"><b>R</b></font>: the default is to install both.
</p>
<p>
The default package type is <code>"win.binary"</code> on both 32- and
64-bit builds: a single repository contains binary packages for
both architectures.  This is in place for CRAN, CRANextras and
BioC: <code>type = "win64.binary"</code> can still be used for any
repositories which follow the <font face="Courier New,Courier" color="#666666"><b>R</b></font> 2.11.x convention.  With the
default filters (see <code>?available.packages</code>) packages will
only be offered if they are available for the current
architecture.
</p>
<p>
The default personal library, e.g. &lsquo;<span class="file">~/R/win-library/2.12</span>&rsquo;
is now the same for both 32- and 64-bit <font face="Courier New,Courier" color="#666666"><b>R</b></font>.
</p>
<p>
</li>
<li>The recommended 64-bit toolchain has been changed to one
that does not add leading underscores. See
<a href="http://www.murdoch-sutherland.com/Rtools/">http://www.murdoch-sutherland.com/Rtools/</a> or
<a href="http://www.stats.ox.ac.uk/pub/Rtools/">http://www.stats.ox.ac.uk/pub/Rtools/</a>.  Any static or import
libraries for external software used in installing packages will
need to be re-compiled for this toolchain, but the use of DLLs is
unaffected.
</p>
<p>
</li>
<li>For those building <font face="Courier New,Courier" color="#666666"><b>R</b></font> from the sources, the 64-bit
<code>Tcl</code> binary distribution for 2.12.x is in file
&lsquo;<span class="file">R64a_Tcl_8-5-8.zip</span>&rsquo; and contains e.g. directory
&lsquo;<span class="file">Tcl/bin64</span>&rsquo; and not &lsquo;<span class="file">Tcl/bin</span>&rsquo;.
</ul>

</p>



<h4>PACKAGE INSTALLATION</h4>

<p>

<ul>
<li> The deprecated environment variable <span class="env">RHOME</span> is no longer
set when a package is installed: use <span class="env">R_HOME</span> instead (and
depend on <code>R (&gt;= 2.9)</code> ).
</p>
<p>
</li>
<li>Package installation, including &lsquo;<span class="file">configure.win</span>&rsquo;
scripts, can use <code>${R_HOME}/bin${R_ARCH_BIN}</code> as a
portable way to find the binaries such as &lsquo;<span class="file">Rscript.exe</span>&rsquo;.
</ul>

</p>



<h4>BUG FIXES</h4>

<p>

<ul>
<li> <CODE>R.exe</CODE> when used in place of <CODE>Rterm.exe</CODE>
set the environment variables set by <CODE>R CMD</CODE>.  Conversely,
<CODE>R CMD BATCH</CODE> did not.
</ul>

</p>

</p>


<h3>CHANGES IN R VERSION 2.11.1 patched</h3>

<p>


<h4>BUG FIXES</h4>

<p>

<ul>
<li> <code>file.rename()</code> now waits for the rename to complete
before returning, so that operations on the new filename will
not fail.
</p>
<p>
</li>
<li><code>Sys.info()</code> and <code>win.version()</code> now report
Windows 7 as such (and not as Vista), and <code>Sys.info()</code> now
reports the machine type as <code>"x86-64"</code> on 64-bit platforms.
</p>
<p>
</li>
<li><code>serialize()</code> to a raw vector works around the dismal
performance of Windows' memory manager by allocating much larger
chunks of memory less frequently.
</p>
<p>
</li>
<li><code>readClipboard()</code> could cause a segfault with certain
clipboard data.
</p>
<p>
</li>
<li>A fix intended for Mac OS X was incorrectly applied to
Windows, so <code>iconv(x, from, "")</code> in a C locale was
interpreted as requesting translation to UTF-8.
</p>
<p>
</li>
<li><code>system(intern=TRUE)</code> often returned <code>0</code>
rather than an error status if the command could not be found, if
run from <code>Rterm</code> or from <code>Rgui</code> with
<code>show.output.on.console = FALSE</code>.
</p>
<p>
</li>
<li><code>memory.limit()</code> did not allow sizes greater than
4095 on 64 bit builds. (<a href="https://bugs.R-project.org/bugzilla3/show_bug.cgi?id=14372">PR#14372</a>)
</ul>

</p>

</p>


<h3>CHANGES IN R VERSION 2.11.1</h3>

<p>


<h4>NEW FEATURES</h4>

<p>

<ul>
<li> The <CODE>Rgui</CODE> console, pagers and editor on the 64-bit
build now have a title bar icon.
</p>
<p>
</li>
<li>The outer frame/console for <CODE>Rgui/Rterm</CODE> mentions
'(64-bit)' to make it easier to distinguish running copies of <font face="Courier New,Courier" color="#666666"><b>R</b></font>.
</p>
<p>
</li>
<li>The package entries in listbox shown by the <code>Install
       package(s) ...</code> menu are now explicitly sorted in the current
locale (as they were in most previous releases, but not in
2.11.0).
</p>
<p>
</li>
<li><CODE>R CMD INSTALL</CODE> can install zipfiles as binary
packages.
</p>
<p>
</li>
<li>Errors in the &lsquo;<span class="file">Rconsole</span>&rsquo; file are ignored: silently on
startup, with a warning when &lsquo;<span class="file">Rconsole</span>&rsquo; is loaded
interactively.
</ul>

</p>

</p>


<h3>CHANGES IN R VERSION 2.11.0</h3>

<p>


<h4>NEW FEATURES</h4>

<p>

<ul>
<li> There is now a native x64 Windows port, with a binary installer
and binaries of packages available on CRAN.  See the 'R
Administration and Installation Manual' and the 'R for Windows FAQ'.
</p>
<p>
</li>
<li><CODE>Rcmd cmd</CODE> (or <CODE>R CMD cmd</CODE>) now runs an
arbitrary '<span class="option">cmd</span>' if '<span class="option">cmd</span>' is not one of the
builtin commands, and does not have extension '&lsquo;<span class="file">.sh</span>&rsquo;' or
'&lsquo;<span class="file">.pl</span>&rsquo;' (when it is run as a shell or Perl script
respectively).  This is done by passing '<span class="option">cmd</span>' to the
command interpreter determined by the <span class="env">COMSPEC</span> environment
variable (which in a vanilla Windows system points to
&lsquo;<span class="file">cmd.exe</span>&rsquo;).
</p>
<p>
</li>
<li><code>X11()</code> and <code>x11()</code> gain additional arguments to
be more similar to the Unix <code>X11()</code> device.
</p>
<p>
</li>
<li><code>file.rename()</code> can work across volumes (by copy-and-delete).
</p>
<p>
</li>
<li>The main HTML help page now links to this &lsquo;<span class="file">CHANGES</span>&rsquo; file.
(Suggested by Henrik Bengtsson.) 
</p>
<p>
</li>
<li><code>strftime(format = "%z")</code> now gives the timezone names
used by the Olson database and not those used by Windows.
</p>
<p>
</li>
<li><code>iconv(to = "ASCII")</code> no longer transliterates, but
<code>iconv(to = "ASCII//TRANSLIT")</code> will.  This makes
<code>tools::showNonASCII()</code> work the same way as on other platforms.
</p>
<p>
</li>
<li><code>readRegistry()</code> can look at either the 32- or 64-bit view
of the Registry on 64-bit Windows.
</ul>

</p>



<h4>INSTALLATION</h4>

<p>

<ul>
<li> The <code>Tcl</code> timezone files (3Mb on disc) are now an
optional part of the installation: they would be very rarely used
with <font face="Courier New,Courier" color="#666666"><b>R</b></font>.
</p>
<p>
</li>
<li>&lsquo;<span class="file">RSetReg.exe</span>&rsquo; has been updated to (un)set the
version-specific keys in the same way as the main installer, and
to have the optional argument <span class="option">/Personal</span> to (un)set the
per-user rather than the per-machine keys (which need
administrative access).
</p>
<p>
</li>
<li>When building <font face="Courier New,Courier" color="#666666"><b>R</b></font>, the recommended way is now to supply a file
&lsquo;<span class="file">R_HOME/src/gnuwin32/MkRules.local</span>&rsquo; instead of editing
&lsquo;<span class="file">MkRules</span>&rsquo;: there is now no &lsquo;<span class="file">MkRules</span>&rsquo; file in the
distribution, but one is generated during the build process.
</p>
<p>
&lsquo;<span class="file">MkRules.local</span>&rsquo; can be generated by copying and editing
&lsquo;<span class="file">MkRules.dist</span>&rsquo;.
</p>
<p>
</li>
<li>The MSI installer defaults to an all-user (per machine)
install (by setting the <code>ALLUSERS</code> property to <code>1</code>).
This can be changed at installation, and it can be built for a
user-mode install (see &lsquo;<span class="file">MkRules.dist</span>&rsquo;).
</ul>

</p>



<h4>BUG FIXES</h4>

<p>

<ul>
<li> Using <code>ESC</code> to interrupt a <code>system()</code> call could
cause <font face="Courier New,Courier" color="#666666"><b>R</b></font> to become unstable.
</p>
<p>
</li>
<li><code>0^1i</code> (which should be complex <code>NAN</code>) was
incorrect.
</ul>

</p>

</p>


<h3>CHANGES IN R VERSION 2.10.1 patched</h3>

<p>


<h4>BUG FIXES</h4>

<p>

<ul>
<li> Some of the MDI toolbar buttons (e.g. <code>"Open Script"</code>)
did not return the focus to the console if the user cancelled the
action.
</p>
<p>
</li>
<li><code>system()</code> (and hence <code>shell()</code>) did not set the
standard file handles properly, so some programs would not run.
</p>
<p>
</li>
<li><code>setWinProgressBar()</code> did not check the type of its
<code>'title'</code> and <code>'label'</code> arguments and might have
crashed if they were mis-specified.  It now does, thanks to a
report by Greg Snow.
</ul>

</p>

</p>


<h3>CHANGES IN R VERSION 2.10.1</h3>

<p>


<h4>BUG FIXES</h4>

<p>

<ul>
<li> The installer did not properly record help type choices in
&lsquo;<span class="file">R_HOME/etc/Rprofile.site</span>&rsquo;.
</p>
<p>
</li>
<li><CODE>Rcmd INSTALL</CODE> once again uses
<span class="option">--no-restore</span>, for consistency with the Unix version and
<font face="Courier New,Courier" color="#666666"><b>R</b></font> 2.9.2.
</p>
<p>
</li>
<li>The HTML package index was not constructed properly when the
library path was specified with backslashes.  (Patch submitted
by Gabor Grothendieck.)
</ul>

</p>

</p>


<h3>CHANGES IN R VERSION 2.10.0</h3>

<p>


<h4>NEW FEATURES</h4>

<p>

<ul>
<li> <code>windows()</code> now has a parameter <code>fillOddEven</code>
(default <code>TRUE</code>), which controls the mode used for polygon
fills of self-intersecting shapes.
</p>
<p>
</li>
<li>The functions <code>arrangeWindows()</code> and
<code>getWindowsHandles()</code> have been added to give more
programmatic control to the appearance of windows in an R
session.
</p>
<p>
</li>
<li>A &lsquo;Windows&rsquo; menu has been added to the SDI version of
the <font face="Courier New,Courier" color="#666666"><b>R</b></font> GUI, and the corresponding menu in the MDI version has
been expanded slightly.
</p>
<p>
</li>
<li>The <code>libpng</code> library has been updated to version 1.2.40.
</p>
<p>
</li>
<li>The remaining Perl scripts <code>build</code>, <code>check</code>,
<code>Rprof</code>, <code>Sd2Rd</code> in &lsquo;<span class="file">R_HOME/bin</span>&rsquo; now have extension
&lsquo;<span class="file">.pl</span>&rsquo;.
</p>
<p>
</li>
<li><code>Rcmd</code> (or <code>R CMD</code>) can now run &lsquo;<span class="file">.sh</span>&rsquo; (shell)
and &lsquo;<span class="file">.pl</span>&rsquo; (Perl) scripts anywhere on the path (as well as
&lsquo;<span class="file">.bat</span>&rsquo; and &lsquo;<span class="file">.exe</span>&rsquo; files as before).
</ul>

</p>



<h4>PACKAGE INSTALLATION</h4>

<p>

<ul>
<li> <CODE>Rcmd SHLIB</CODE> (which is used by <CODE>Rcmd
       INSTALL</CODE>) now calls <code>make</code> without a target, rather than
target <code>'all'</code>.  This is now the same as on Unix, and was
announced in the &lsquo;<span class="file">NEWS</span>&rsquo; file for 2.9.0.
</p>
<p>
</li>
<li>Help files are no longer zipped: rendering as text, HTML,
latex or examples is now done when needed.
</p>
<p>
Options <span class="option">--use-zip</span> and <span class="option">--use-zip-help</span> in
<CODE>R CMD INSTALL</CODE> are no longer available and
<span class="option">--auto-zip</span> only zips data (or not).
</p>
<p>
Help in packages installed under 2.9.x may not work correctly,
and a warning is given when such a package is attached by
<code>library()</code>.  Re-installation of all packages is strongly
recommended (use <code>update.packages(checkBuilt = TRUE)</code>).
</p>
<p>
Binary packages are installed without CHM help if they contain
it (as those intended for 2.9.x may).
</p>
<p>
</li>
<li>It is possible to install source packages without Rtools
provided they have no compiled code and no &lsquo;<span class="file">configure.win</span>&rsquo; or
&lsquo;<span class="file">cleanup.win</span>&rsquo; script.
</ul>

</p>



<h4>INSTALLATION</h4>

<p>

<ul>
<li> Support for memory profiling is enabled in a standard build
(this can be changed by editing &lsquo;<span class="file">config.h</span>&rsquo;).
</p>
<p>
</li>
<li>CHM help is no longer supported.
</p>
<p>
</li>
<li>The help default for the standard installer is HTML help rather
than CHM help.
</p>
<p>
</li>
<li>The categories in the installers have been simplified.  Now the
files to support installation of source packages are always
installed (they are now only 0.7Mb), and there are no longer
categories 'chtml', 'html/help', 'latex' and 'Rd'.
</p>
<p>
</p>
<p>
</ul>

</p>



<h4>BUG FIXES</h4>

<p>

<ul>
<li> <CODE>Rcmd open</CODE> now works as documented: previously
<CODE>Rcmd open.exe</CODE> was required.
</p>
<p>
</li>
<li><code>cat(x, file=)</code> in <CODE>Rgui</CODE> tried to interpret
UTF-8-encoded strings for the console rather than converting them
to the native encoding.
</ul>

</p>

</p>


</body></html>
